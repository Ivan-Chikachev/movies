(this.webpackJsonpmovies=this.webpackJsonpmovies||[]).push([[0],{34:function(e,t,c){},35:function(e,t,c){},60:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c.n(n),i=c(27),a=c.n(i),l=(c(34),c(35),c(9)),r=Object(n.createContext)(),m=c(1),j=function(e){return Object(m.jsx)("div",{className:"pagination",children:e.pages.map((function(t,c){return Object(m.jsx)("span",{className:e.currentPage===t?"current_page page":"page",onClick:function(){return e.setCurrentPage(t)},children:t},c)}))})},o=c(12),u=function(){var e=Object(n.useContext)(r),t=e.state,c=e.getFilms,s=e.createPages,i=Object(n.useState)(1),a=Object(l.a)(i,2),u=a[0],d=a[1],b=Math.ceil(t.totalCountFilms/16),f=[];return Object(n.useEffect)((function(){c(u)}),[u]),s(f,b,u),Object(m.jsxs)("div",{className:"container",children:[Object(m.jsx)("div",{className:"films-list",children:t.films.map((function(e){return Object(m.jsxs)("div",{className:"film-item",children:[Object(m.jsx)("div",{children:Object(m.jsx)("img",{className:"film-item__img",src:e.medium_cover_image,alt:""})}),Object(m.jsxs)("div",{className:"film-item__about",children:[Object(m.jsx)(o.b,{className:"film-item__title",to:{pathname:"/film",state:{item:e}},children:e.title}),Object(m.jsx)("p",{className:"film-item__year",children:e.year}),Object(m.jsx)("p",{className:"film-item__rating",children:e.rating}),Object(m.jsxs)("p",{className:"film-item__runtime",children:[e.runtime," min"]}),Object(m.jsx)("p",{className:"film-item__description",children:e.description_full.length<300?e.description_full:e.description_full.slice(0,300)+"..."})]})]},e.id)}))}),Object(m.jsx)(j,{currentPage:u,pages:f,setCurrentPage:d})]})},d=c(8),b="GET_FILMS",f="SET_TOTAL_FILMS",O="DELETE_COMMENT",_=function(e,t){switch(t.type){case b:return Object(d.a)(Object(d.a)({},e),{},{films:t.films});case f:return Object(d.a)(Object(d.a)({},e),{},{totalCountFilms:t.count});default:return e}},h=c(29).create({baseURL:"https://yts.mx/api/v2/",headers:{}}),p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return h.get("list_movies.json?limit=16&page=".concat(e))},x=function(e){var t=Object(n.useReducer)(_,{films:[],totalCountFilms:0}),c=Object(l.a)(t,2),s=c[0],i=c[1];return Object(m.jsx)(r.Provider,{value:{state:s,getFilms:function(e){p(e).then((function(e){var t,c;i((t=e.data.data.movies,{type:b,films:t})),i((c=e.data.data.movie_count,{type:f,count:c}))}))},createPages:function(e,t,c){if(t>11)if(c>5)for(var n=c-5;n<=c+5&&(e.push(n),n!==t);n++);else for(var s=1;s<=11&&(e.push(s),s!==t);s++);else for(var i=1;i<=t;i++)e.push(i)}},children:e.children})},v=c(2),g=Object(n.createContext)(),N=function(e){var t,c,s,i=Object(n.useState)(""),a=Object(l.a)(i,2),r=a[0],j=a[1],o=Object(n.useContext)(g),u=o.state,d=o.deleteComment,b=u.comments,f=null===(t=e.location)||void 0===t||null===(c=t.state)||void 0===c?void 0:c.item,O=f.id;return Object(m.jsxs)("div",{className:"container",children:[Object(m.jsxs)("div",{className:"film",children:[Object(m.jsx)("div",{className:"film__img-wrap",children:Object(m.jsx)("img",{className:"film__img",src:f.medium_cover_image,alt:""})}),Object(m.jsxs)("div",{className:"film__about",children:[Object(m.jsx)("h2",{className:"film__title",children:f.title}),Object(m.jsx)("p",{className:"film__year",children:f.year}),Object(m.jsxs)("p",{className:"film__runtime",children:[Object(m.jsx)("span",{className:"film__subtitle",children:"Runtime: "}),f.runtime," min"]}),Object(m.jsxs)("p",{className:"film__rating",children:[Object(m.jsx)("span",{className:"film__subtitle",children:"Rating: "}),f.rating]}),Object(m.jsxs)("p",{className:"film__genres",children:[Object(m.jsx)("span",{className:"film__subtitle",children:"Genres:"})," ",f.genres.join(", ")]}),Object(m.jsx)("p",{className:"film__description",children:f.description_full})]})]}),Object(m.jsxs)("div",{className:"comments",children:[Object(m.jsxs)("form",{className:"comments__form",onSubmit:function(e){e.preventDefault(),b[O]||(b[O]=[]),r&&b[O].push(r),j("")},children:[Object(m.jsx)("textarea",{className:"comments__input",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",value:r,onChange:function(e){return j(e.target.value)}}),Object(m.jsx)("input",{className:"btn comments__btn comments__btn--add",type:"submit",value:"Add"})]}),Object(m.jsx)("div",{children:null===(s=b[O])||void 0===s?void 0:s.map((function(e,t){return Object(m.jsxs)("div",{className:"comments__item",children:[Object(m.jsx)("p",{className:"comments__text",children:e}),Object(m.jsx)("button",{className:"btn comments__btn comments__btn--del",onClick:function(){return d(e,O)},children:"Delete"})]},t)}))})]})]})},C=c(13),y=function(e,t){switch(t.type){case O:return Object(d.a)(Object(d.a)({},e),{},{comments:Object(d.a)(Object(d.a)({},e.comments),{},Object(C.a)({},t.id,e.comments[t.id].filter((function(e){return e!==t.c}))))});default:return e}},F=function(e){var t=Object(n.useReducer)(y,{comments:{}}),c=Object(l.a)(t,2),s=c[0],i=c[1];return Object(m.jsx)(g.Provider,{value:{state:s,deleteComment:function(e,t){i(function(e,t){return{type:O,c:e,id:t}}(e,t))}},children:e.children})};var P=function(){return Object(m.jsx)("div",{className:"wrapper",children:Object(m.jsx)(o.a,{children:Object(m.jsx)(x,{children:Object(m.jsx)(F,{children:Object(m.jsxs)(v.c,{children:[Object(m.jsx)(v.a,{path:"/movies",exact:!0,component:u}),Object(m.jsx)(v.a,{path:"/film",exact:!0,component:N})]})})})})})},E=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,61)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,i=t.getLCP,a=t.getTTFB;c(e),n(e),s(e),i(e),a(e)}))};a.a.render(Object(m.jsx)(s.a.StrictMode,{children:Object(m.jsx)(P,{})}),document.getElementById("root")),E()}},[[60,1,2]]]);
//# sourceMappingURL=main.1738579f.chunk.js.map