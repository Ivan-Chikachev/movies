(this.webpackJsonpmovies=this.webpackJsonpmovies||[]).push([[0],{34:function(e,t,c){},35:function(e,t,c){},60:function(e,t,c){"use strict";c.r(t);var n=c(0),s=c.n(n),i=c(27),a=c.n(i),l=(c(34),c(35),c(9)),r=Object(n.createContext)(),m=Object(n.createContext)(),j=c(1),o=function(e){var t,c,s,i=Object(n.useState)(""),a=Object(l.a)(i,2),r=a[0],o=a[1],u=Object(n.useContext)(m),d=u.state,b=u.deleteComment,f=d.comments,O=null===(t=e.location)||void 0===t||null===(c=t.state)||void 0===c?void 0:c.item,_=O.id;return Object(j.jsx)("div",{className:"container",children:Object(j.jsxs)("div",{className:"film",children:[Object(j.jsx)("div",{className:"film__img-wrap",children:Object(j.jsx)("img",{className:"film__img",src:O.medium_cover_image,alt:""})}),Object(j.jsxs)("div",{className:"film__about",children:[Object(j.jsx)("h2",{className:"film__title",children:O.title}),Object(j.jsx)("p",{className:"film__year",children:O.year}),Object(j.jsxs)("p",{className:"film__runtime",children:[Object(j.jsx)("span",{className:"film__subtitle",children:"Runtime: "}),O.runtime," min"]}),Object(j.jsxs)("p",{className:"film__rating",children:[Object(j.jsx)("span",{className:"film__subtitle",children:"Rating: "}),O.rating]}),Object(j.jsxs)("p",{className:"film__genres",children:[Object(j.jsx)("span",{className:"film__subtitle",children:"Genres:"})," ",O.genres.join(", ")]}),Object(j.jsx)("p",{className:"film__description",children:O.description_full}),Object(j.jsxs)("div",{className:"comments",children:[Object(j.jsxs)("form",{className:"comments__form",onSubmit:function(e){e.preventDefault(),f[_]||(f[_]=[]),r&&f[_].push(r),o("")},children:[Object(j.jsx)("input",{className:"comments__input",type:"text",placeholder:"\u0412\u0432\u0435\u0434\u0438\u0442\u0435 \u043a\u043e\u043c\u043c\u0435\u043d\u0442\u0430\u0440\u0438\u0439",value:r,onChange:function(e){return o(e.target.value)}}),Object(j.jsx)("input",{className:"btn comments__btn--add",type:"submit",value:"Add"})]}),Object(j.jsx)("div",{children:null===(s=f[_])||void 0===s?void 0:s.map((function(e,t){return Object(j.jsxs)("div",{className:"comments__item",children:[Object(j.jsx)("p",{className:"comments__text",children:e}),Object(j.jsx)("button",{className:"btn comments__btn--del",onClick:function(){return b(e,_)},children:"Delete"})]},t)}))})]})]})]})})},u=function(e){return Object(j.jsx)("div",{className:"pagination",children:e.pages.map((function(t,c){return Object(j.jsx)("span",{className:e.currentPage===t?"current_page page":"page",onClick:function(){return e.setCurrentPage(t)},children:t},c)}))})},d=c(11),b=function(){var e=Object(n.useContext)(r),t=e.state,c=e.getFilms,s=e.createPages,i=Object(n.useState)(1),a=Object(l.a)(i,2),m=a[0],o=a[1],b=Math.ceil(t.totalCountFilms/16),f=[];return Object(n.useEffect)((function(){c(m)}),[m]),s(f,b,m),Object(j.jsxs)("div",{className:"container",children:[Object(j.jsx)("div",{className:"films-list",children:t.films.map((function(e){return Object(j.jsxs)("div",{className:"film-item",children:[Object(j.jsx)("div",{children:Object(j.jsx)("img",{className:"film-item__img",src:e.medium_cover_image,alt:""})}),Object(j.jsxs)("div",{className:"film-item__about",children:[Object(j.jsx)(d.b,{className:"film-item__title",to:{pathname:"/film",state:{item:e}},children:e.title}),Object(j.jsx)("p",{className:"film-item__year",children:e.year}),Object(j.jsx)("p",{className:"film-item__rating",children:e.rating}),Object(j.jsxs)("p",{className:"film-item__runtime",children:[e.runtime," min"]}),Object(j.jsx)("p",{className:"film-item__description",children:e.description_full.length<300?e.description_full:e.description_full.slice(0,300)+"..."})]})]},e.id)}))}),Object(j.jsx)(u,{currentPage:m,pages:f,setCurrentPage:o})]})},f=c(8),O="GET_FILMS",_="SET_TOTAL_FILMS",h="DELETE_COMMENT",p=function(e,t){switch(t.type){case O:return Object(f.a)(Object(f.a)({},e),{},{films:t.films});case _:return Object(f.a)(Object(f.a)({},e),{},{totalCountFilms:t.count});default:return e}},x=c(29).create({baseURL:"https://yts.mx/api/v2/",headers:{}}),v=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;return x.get("list_movies.json?limit=16&page=".concat(e))},g=function(e){var t=Object(n.useReducer)(p,{films:[],totalCountFilms:0}),c=Object(l.a)(t,2),s=c[0],i=c[1];return Object(j.jsx)(r.Provider,{value:{state:s,getFilms:function(e){v(e).then((function(e){var t,c;i((t=e.data.data.movies,{type:O,films:t})),i((c=e.data.data.movie_count,{type:_,count:c}))}))},createPages:function(e,t,c){if(t>11)if(c>5)for(var n=c-5;n<=c+5&&(e.push(n),n!==t);n++);else for(var s=1;s<=11&&(e.push(s),s!==t);s++);else for(var i=1;i<=t;i++)e.push(i)}},children:e.children})},N=c(2),C=c(13),y=function(e,t){switch(t.type){case h:return Object(f.a)(Object(f.a)({},e),{},{comments:Object(f.a)(Object(f.a)({},e.comments),{},Object(C.a)({},t.id,e.comments[t.id].filter((function(e){return e!==t.c}))))});default:return e}},F=function(e){var t=Object(n.useReducer)(y,{comments:{}}),c=Object(l.a)(t,2),s=c[0],i=c[1];return Object(j.jsx)(m.Provider,{value:{state:s,deleteComment:function(e,t){i(function(e,t){return{type:h,c:e,id:t}}(e,t))}},children:e.children})};var P=function(){return Object(j.jsx)("div",{className:"wrapper",children:Object(j.jsx)(d.a,{children:Object(j.jsx)(g,{children:Object(j.jsx)(F,{children:Object(j.jsxs)(N.c,{children:[Object(j.jsx)(N.a,{path:"/",exact:!0,component:b}),Object(j.jsx)(N.a,{path:"/film",exact:!0,component:o})]})})})})})},E=function(e){e&&e instanceof Function&&c.e(3).then(c.bind(null,61)).then((function(t){var c=t.getCLS,n=t.getFID,s=t.getFCP,i=t.getLCP,a=t.getTTFB;c(e),n(e),s(e),i(e),a(e)}))};a.a.render(Object(j.jsx)(s.a.StrictMode,{children:Object(j.jsx)(P,{})}),document.getElementById("root")),E()}},[[60,1,2]]]);
//# sourceMappingURL=main.0b24ca52.chunk.js.map